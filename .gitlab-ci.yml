stages:
  - setup
  - test
  - teardown
  - deploy




setup all:
  stage: setup
#  when:  manual
  script:
    - python -m platform
    - python hello.py

test ui titles:
  stage: test
  image: jaktestowac/python-chromedriver:3.6-xvfb
  before_script:
  - cat /etc/os-release
  - google-chrome --version
  - chromedriver --version
  - pip install -r requirements.txt
  script:
    - python -m unittest shop_sample_tests
  artifacts:
    when: always
    paths:
      - ./testResults/

# Manual job - NON-BLOCKING execution
test ui gdpr:
  stage: test
  image: jaktestowac/python-chromedriver:3.6-xvfb
  before_script:
  - cat /etc/os-release
  - google-chrome --version
  - chromedriver --version

  #  when: manual
#  allow_failure: false
  script:
    - python -m unittest shop_gdpr_tests

teardown end of tests:
  stage: teardown
  script:
    - python bye.py

teardown test report:
  stage: teardown
  script:
    - python generate_report.py

deploy to production:
  stage: deploy
  when: manual
  script:
    - python deploy.py